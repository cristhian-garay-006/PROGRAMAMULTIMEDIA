(function (cjs, an) {

	var p; // shortcut to reference prototypes
	var lib = {}; var ss = {}; var img = {};
	lib.ssMetadata = [
		{ name: "garayv3 _1__atlas_1", frames: [[0, 0, 1650, 1275]] }
	];


	(lib.AnMovieClip = function () {
		this.actionFrames = [];
		this.ignorePause = false;
		this.gotoAndPlay = function (positionOrLabel) {
			cjs.MovieClip.prototype.gotoAndPlay.call(this, positionOrLabel);
		}
		this.play = function () {
			cjs.MovieClip.prototype.play.call(this);
		}
		this.gotoAndStop = function (positionOrLabel) {
			cjs.MovieClip.prototype.gotoAndStop.call(this, positionOrLabel);
		}
		this.stop = function () {
			cjs.MovieClip.prototype.stop.call(this);
		}
	}).prototype = p = new cjs.MovieClip();
	// symbols:



	(lib.img1 = function () {
		this.initialize(ss["garayv3 _1__atlas_1"]);
		this.gotoAndStop(0);
	}).prototype = p = new cjs.Sprite();
	// helper functions:

	function mc_symbol_clone() {
		var clone = this._cloneProps(new this.constructor(this.mode, this.startPosition, this.loop, this.reversed));
		clone.gotoAndStop(this.currentFrame);
		clone.paused = this.paused;
		clone.framerate = this.framerate;
		return clone;
	}

	function getMCSymbolPrototype(symbol, nominalBounds, frameBounds) {
		var prototype = cjs.extend(symbol, cjs.MovieClip);
		prototype.clone = mc_symbol_clone;
		prototype.nominalBounds = nominalBounds;
		prototype.frameBounds = frameBounds;
		return prototype;
	}


	(lib.s6 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		this.shape.graphics.f("#FF0000").s().p("AkcDqIAAnTII5AAIAAHTg");
		this.shape.setTransform(0, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = p = new cjs.MovieClip();
	p.nominalBounds = new cjs.Rectangle(-28.5, -23.3, 57, 46.7);


	(lib.s5 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		this.shape.graphics.f("#FF0000").s().p("AkcDqIAAnTII5AAIAAHTg");
		this.shape.setTransform(0, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = p = new cjs.MovieClip();
	p.nominalBounds = new cjs.Rectangle(-28.5, -23.3, 57, 46.7);


	(lib.s4 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		this.shape.graphics.f("#FF0000").s().p("AkcDqIAAnTII5AAIAAHTg");
		this.shape.setTransform(0, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = p = new cjs.MovieClip();
	p.nominalBounds = new cjs.Rectangle(-28.5, -23.3, 57, 46.7);


	(lib.s3 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		this.shape.graphics.f("#FF0000").s().p("AkcDqIAAnTII5AAIAAHTg");
		this.shape.setTransform(0, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = p = new cjs.MovieClip();
	p.nominalBounds = new cjs.Rectangle(-28.5, -23.3, 57, 46.7);


	(lib.s2 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		this.shape.graphics.f("#FF0000").s().p("AkcDqIAAnTII5AAIAAHTg");
		this.shape.setTransform(0, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = p = new cjs.MovieClip();
	p.nominalBounds = new cjs.Rectangle(-28.5, -23.3, 57, 46.7);


	(lib.s1 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		this.shape.graphics.f("#FF0000").s().p("AkcDqIAAnTII5AAIAAHTg");
		this.shape.setTransform(0, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = p = new cjs.MovieClip();
	p.nominalBounds = new cjs.Rectangle(-28.5, -23.3, 57, 46.7);


	(lib.pieza6 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		var sprImg_shape = cjs.SpriteSheetUtils.extractFrame(ss["garayv3 _1__atlas_1"], 0);
		sprImg_shape.onload = function () {
			this.shape.graphics.bf(sprImg_shape, null, new cjs.Matrix2D(0.17, 0, 0, 0.199, -222.5, -173.1)).s().p("Ao+MgIAAjxIBGi0IBkAAQDfkCjUkuQgigYgvAFIBQlUIEiAAQASglgIgrIAAigQBIACADgVIB8AAIBGBPQgJCvBtBLIEsAAIAAT2g")
		}.bind(this);
		this.shape.setTransform(0.025, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = getMCSymbolPrototype(lib.pieza6, new cjs.Rectangle(-57.4, -80, 114.9, 160.1), null);


	(lib.pieza5 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		var sprImg_shape = cjs.SpriteSheetUtils.extractFrame(ss["garayv3 _1__atlas_1"], 0);
		sprImg_shape.onload = function () {
			this.shape.graphics.bf(sprImg_shape, null, new cjs.Matrix2D(0.17, 0, 0, 0.199, -127.7, -186.1)).s().p("AnVKeIgRihIAAhtIhGg9IhkAAIAAl7IDShGIAAowIPnAAIhQFVQAugGAjAYQDTEvjeEBIhkAAIhGC0IAADxg")
		}.bind(this);
		this.shape.setTransform(0.0035, 0);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = getMCSymbolPrototype(lib.pieza5, new cjs.Rectangle(-65.7, -67, 131.4, 134.1), null);


	(lib.pieza4 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		var sprImg_shape = cjs.SpriteSheetUtils.extractFrame(ss["garayv3 _1__atlas_1"], 0);
		sprImg_shape.onload = function () {
			this.shape.graphics.bf(sprImg_shape, null, new cjs.Matrix2D(0.17, 0, 0, 0.199, -41.5, -186.1)).s().p("AmeKeIAA08IM9AAIAAIwIjSBGIAAF7IBkAAIBGA9IAABtIARChg")
		}.bind(this);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = getMCSymbolPrototype(lib.pieza4, new cjs.Rectangle(-41.5, -67, 83, 134.1), null);


	(lib.pieza3 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		var sprImg_shape = cjs.SpriteSheetUtils.extractFrame(ss["garayv3 _1__atlas_1"], 0);
		sprImg_shape.onload = function () {
			this.shape.graphics.bf(sprImg_shape, null, new cjs.Matrix2D(0.17, 0, 0, 0.199, -223.5, -63)).s().p("AEJJ2QhthLAJivIhGhPIh8AAQgDAVhIgCIAACgQAIArgSAlIkiAAIhGngIhahQIAAj5IDci0ICMiMIAAg8IMBAAIAATrg")
		}.bind(this);
		this.shape.setTransform(0.025, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = getMCSymbolPrototype(lib.pieza3, new cjs.Rectangle(-56.4, -63, 112.9, 126.1), null);


	(lib.pieza2 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		var sprImg_shape = cjs.SpriteSheetUtils.extractFrame(ss["garayv3 _1__atlas_1"], 0);
		sprImg_shape.onload = function () {
			this.shape.graphics.bf(sprImg_shape, null, new cjs.Matrix2D(0.17, 0, 0, 0.199, -137.5, -59.5)).s().p("AogJTIAAhGIBQk2Ih4hQIAAhkQgpglgdgWIAAhaQArgVgNgxIFAlAQgQgjgsg3IP7AAIAAA8IiMCMIjcC0IAAD5IBaBQIBGHgg")
		}.bind(this);
		this.shape.setTransform(0, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = getMCSymbolPrototype(lib.pieza2, new cjs.Rectangle(-65.5, -59.5, 131, 119.1), null);


	(lib.pieza1 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.shape = new cjs.Shape();
		var sprImg_shape = cjs.SpriteSheetUtils.extractFrame(ss["garayv3 _1__atlas_1"], 0);
		sprImg_shape.onload = function () {
			this.shape.graphics.bf(sprImg_shape, null, new cjs.Matrix2D(0.17, 0, 0, 0.199, -53.5, -59.5)).s().p("AoWJTIAAylIPxAAQAsA3AQAjIlAFAQANAxgrAVIAABaQAdAWApAlIAABkIB4BQIhQE2IAABGg")
		}.bind(this);
		this.shape.setTransform(0, 0.025);

		this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

		this._renderFirstFrame();

	}).prototype = getMCSymbolPrototype(lib.pieza1, new cjs.Rectangle(-53.5, -59.5, 107, 119.1), null);


	(lib.guia = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		// Capa_1
		this.instance = new lib.img1();
		this.instance.setTransform(-139.95, -126.55, 0.1697, 0.1985);

		this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

		this._renderFirstFrame();

	}).prototype = getMCSymbolPrototype(lib.guia, new cjs.Rectangle(-139.9, -126.5, 279.9, 253.1), null);


	// stage content:
	(lib.garayv31 = function (mode, startPosition, loop, reversed) {
		if (loop == null) { loop = true; }
		if (reversed == null) { reversed = false; }
		var props = new Object();
		props.mode = mode;
		props.startPosition = startPosition;
		props.labels = {};
		props.loop = loop;
		props.reversed = reversed;
		cjs.MovieClip.apply(this, [props]);

		this.actionFrames = [0];
		this.isSingleFrame = false;
		// timeline functions:
		this.frame_0 = function () {
			if (this.isSingleFrame) {
				return;
			}
			if (this.totalFrames == 1) {
				this.isSingleFrame = true;
			}
			// ==============================
			// REFERENCIAS
			// ==============================
			var piezas = [
				this.ipieza1,
				this.ipieza2,
				this.ipieza3,
				this.ipieza4,
				this.ipieza5,
				this.ipieza6
			];

			var zonas = [
				this.s1,
				this.s2,
				this.s3,
				this.s4,
				this.s5,
				this.s6
			];

			// ==============================
			// POSICIONES INICIALES
			// ==============================
			var inicio = [
				{ x: 308.45, y: 67.5 },
				{ x: 377.5, y: 161.35 },
				{ x: 487.4, y: 75 },
				{ x: 270.5, y: 317.05 },
				{ x: 327.7, y: 287.95 },
				{ x: 486.4, y: 314.05 }
			];

			// ==============================
			// POSICIONES FINALES
			// ==============================
			var finalPos = [
				{ x: 74.7, y: 121.5 },   // pieza 1
				{ x: 147.5, y: 121.5 },
				{ x: 233.5, y: 125 },
				{ x: 51.5, y: 248.1 },
				{ x: 137.7, y: 248.1 },
				{ x: 232.45, y: 235.1 }
			];

			// ==============================
			// VARIABLES DE ARRASTRE
			// ==============================
			var offsetX = 0;
			var offsetY = 0;

			// ==============================
			// VARIABLES DE SEGUIMIENTO
			// ==============================
			var piezasColocadas = 0; // NEW: Track placed pieces

			// ==============================
			// INICIALIZACIÃ“N
			// ==============================
			for (let i = 0; i < piezas.length; i++) {

				piezas[i].x = inicio[i].x;
				piezas[i].y = inicio[i].y;
				piezas[i].indice = i;

				piezas[i].cursor = "pointer";

				piezas[i].on("mousedown", presionar);
				piezas[i].on("pressmove", arrastrar);
				piezas[i].on("pressup", soltar);
			}

			// ==============================
			// FUNCIONES
			// ==============================
			function presionar(evt) {
				let p = stage.globalToLocal(evt.stageX, evt.stageY);
				offsetX = evt.currentTarget.x - p.x;
				offsetY = evt.currentTarget.y - p.y;

				stage.setChildIndex(evt.currentTarget, stage.numChildren - 1);
			}

			function arrastrar(evt) {
				let p = stage.globalToLocal(evt.stageX, evt.stageY);
				evt.currentTarget.x = p.x + offsetX;
				evt.currentTarget.y = p.y + offsetY;
			}

			function soltar(evt) {
				let pieza = evt.currentTarget;
				let i = pieza.indice;

				let pt = pieza.localToLocal(0, 0, zonas[i]);

				if (zonas[i].hitTest(pt.x, pt.y)) {

					// ðŸ”§ AJUSTE FINAL SOLO PARA PIEZA 1 (DERECHA)
					if (i === 0) {
						pieza.x = finalPos[i].x + 4; // â† AQUÃ el ajuste fino
						pieza.y = finalPos[i].y;
					} else {
						pieza.x = finalPos[i].x;
						pieza.y = finalPos[i].y;
					}

					pieza.removeAllEventListeners("pressmove");
					// NEW: Logic for completion
					piezasColocadas++;
					if (piezasColocadas >= piezas.length) {
						console.log("Puzzle Completed!");
						if (window.mostrarFelicitaciones) {
							window.mostrarFelicitaciones();
						}
					}

				} else {
					pieza.x = inicio[i].x;
					pieza.y = inicio[i].y;
				}
			}
		}

		// actions tween:
		this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

		// piezas
		this.ipieza6 = new lib.pieza6();
		this.ipieza6.name = "ipieza6";
		this.ipieza6.setTransform(486.4, 314.05);
		this.ipieza6.shadow = new cjs.Shadow("rgba(0,0,0,1)", 3, 3, 4);

		this.ipieza5 = new lib.pieza5();
		this.ipieza5.name = "ipieza5";
		this.ipieza5.setTransform(372.7, 287.95);
		this.ipieza5.shadow = new cjs.Shadow("rgba(0,0,0,1)", 3, 3, 4);

		this.ipieza4 = new lib.pieza4();
		this.ipieza4.name = "ipieza4";
		this.ipieza4.setTransform(270.5, 317.05);
		this.ipieza4.shadow = new cjs.Shadow("rgba(0,0,0,1)", 3, 3, 4);

		this.ipieza3 = new lib.pieza3();
		this.ipieza3.name = "ipieza3";
		this.ipieza3.setTransform(487.4, 75);
		this.ipieza3.shadow = new cjs.Shadow("rgba(0,0,0,1)", 3, 3, 4);

		this.ipieza2 = new lib.pieza2();
		this.ipieza2.name = "ipieza2";
		this.ipieza2.setTransform(377.5, 161.35);
		this.ipieza2.shadow = new cjs.Shadow("rgba(0,0,0,1)", 3, 3, 4);

		this.ipieza1 = new lib.pieza1();
		this.ipieza1.name = "ipieza1";
		this.ipieza1.setTransform(324.05, 67.5, 1, 1, 0, 0, 0, 15.6, 0);
		this.ipieza1.shadow = new cjs.Shadow("rgba(0,0,0,1)", 3, 3, 4);

		this.timeline.addTween(cjs.Tween.get({}).to({ state: [{ t: this.ipieza1 }, { t: this.ipieza2 }, { t: this.ipieza3 }, { t: this.ipieza4 }, { t: this.ipieza5 }, { t: this.ipieza6 }] }).wait(1));

		// guia
		this.instance = new lib.guia();
		this.instance.setTransform(149.95, 188.55);
		this.instance.alpha = 0.2109;

		this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

		// cuadrado
		this.s6 = new lib.s6();
		this.s6.name = "s6";
		this.s6.setTransform(239.65, 251.5);

		this.s5 = new lib.s5();
		this.s5.name = "s5";
		this.s5.setTransform(153.3, 251.5);

		this.s4 = new lib.s4();
		this.s4.name = "s4";
		this.s4.setTransform(56.05, 251.5);

		this.s3 = new lib.s3();
		this.s3.name = "s3";
		this.s3.setTransform(239.65, 130.95);

		this.s2 = new lib.s2();
		this.s2.name = "s2";
		this.s2.setTransform(153.3, 130.95);

		this.s1 = new lib.s1();
		this.s1.name = "s1";
		this.s1.setTransform(56.05, 130.95);

		this.timeline.addTween(cjs.Tween.get({}).to({ state: [{ t: this.s1 }, { t: this.s2 }, { t: this.s3 }, { t: this.s4 }, { t: this.s5 }, { t: this.s6 }] }).wait(1));

		this._renderFirstFrame();

	}).prototype = p = new lib.AnMovieClip();
	p.nominalBounds = new cjs.Rectangle(285, 205, 270, 200.10000000000002);
	// library properties:
	lib.properties = {
		id: '901EAD1765481E44B1CBFF034E123773',
		width: 550,
		height: 400,
		fps: 24,
		color: "#FFFFFF",
		opacity: 1.00,
		manifest: [
			{ src: "images/garayv3 _1__atlas_1.png", id: "garayv3 _1__atlas_1" }
		],
		preloads: []
	};



	// bootstrap callback support:

	(lib.Stage = function (canvas) {
		createjs.Stage.call(this, canvas);
	}).prototype = p = new createjs.Stage();

	p.setAutoPlay = function (autoPlay) {
		this.tickEnabled = autoPlay;
	}
	p.play = function () { this.tickEnabled = true; this.getChildAt(0).gotoAndPlay(this.getTimelinePosition()) }
	p.stop = function (ms) { if (ms) this.seek(ms); this.tickEnabled = false; }
	p.seek = function (ms) { this.tickEnabled = true; this.getChildAt(0).gotoAndStop(lib.properties.fps * ms / 1000); }
	p.getDuration = function () { return this.getChildAt(0).totalFrames / lib.properties.fps * 1000; }

	p.getTimelinePosition = function () { return this.getChildAt(0).currentFrame / lib.properties.fps * 1000; }

	an.bootcompsLoaded = an.bootcompsLoaded || [];
	if (!an.bootstrapListeners) {
		an.bootstrapListeners = [];
	}

	an.bootstrapCallback = function (fnCallback) {
		an.bootstrapListeners.push(fnCallback);
		if (an.bootcompsLoaded.length > 0) {
			for (var i = 0; i < an.bootcompsLoaded.length; ++i) {
				fnCallback(an.bootcompsLoaded[i]);
			}
		}
	};

	an.compositions = an.compositions || {};
	an.compositions['901EAD1765481E44B1CBFF034E123773'] = {
		getStage: function () { return exportRoot.stage; },
		getLibrary: function () { return lib; },
		getSpriteSheet: function () { return ss; },
		getImages: function () { return img; }
	};

	an.compositionLoaded = function (id) {
		an.bootcompsLoaded.push(id);
		for (var j = 0; j < an.bootstrapListeners.length; j++) {
			an.bootstrapListeners[j](id);
		}
	}

	an.getComposition = function (id) {
		return an.compositions[id];
	}


	an.makeResponsive = function (isResp, respDim, isScale, scaleType, domContainers) {
		var lastW, lastH, lastS = 1;
		window.addEventListener('resize', resizeCanvas);
		resizeCanvas();
		function resizeCanvas() {
			var w = lib.properties.width, h = lib.properties.height;
			var iw = window.innerWidth, ih = window.innerHeight;
			var pRatio = window.devicePixelRatio || 1, xRatio = iw / w, yRatio = ih / h, sRatio = 1;
			if (isResp) {
				if ((respDim == 'width' && lastW == iw) || (respDim == 'height' && lastH == ih)) {
					sRatio = lastS;
				}
				else if (!isScale) {
					if (iw < w || ih < h)
						sRatio = Math.min(xRatio, yRatio);
				}
				else if (scaleType == 1) {
					sRatio = Math.min(xRatio, yRatio);
				}
				else if (scaleType == 2) {
					sRatio = Math.max(xRatio, yRatio);
				}
			}
			domContainers[0].width = w * pRatio * sRatio;
			domContainers[0].height = h * pRatio * sRatio;
			domContainers.forEach(function (container) {
				container.style.width = w * sRatio + 'px';
				container.style.height = h * sRatio + 'px';
			});
			stage.scaleX = pRatio * sRatio;
			stage.scaleY = pRatio * sRatio;
			lastW = iw; lastH = ih; lastS = sRatio;
			stage.tickOnUpdate = false;
			stage.update();
			stage.tickOnUpdate = true;
		}
	}
	an.handleSoundStreamOnTick = function (event) {
		if (!event.paused) {
			var stageChild = stage.getChildAt(0);
			if (!stageChild.paused || stageChild.ignorePause) {
				stageChild.syncStreamSounds();
			}
		}
	}
	an.handleFilterCache = function (event) {
		if (!event.paused) {
			var target = event.target;
			if (target) {
				if (target.filterCacheList) {
					for (var index = 0; index < target.filterCacheList.length; index++) {
						var cacheInst = target.filterCacheList[index];
						if ((cacheInst.startFrame <= target.currentFrame) && (target.currentFrame <= cacheInst.endFrame)) {
							cacheInst.instance.cache(cacheInst.x, cacheInst.y, cacheInst.w, cacheInst.h);
						}
					}
				}
			}
		}
	}


})(createjs = createjs || {}, AdobeAn = AdobeAn || {});
var createjs, AdobeAn;